---
id: bettercasino-menu-settings
title: Настройки GUI анимации
toc_min_heading_level: 2
toc_max_heading_level: 5
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

# Настройки GUI анимации
Список всех настроек GUI и действий анимации

## Меню
```yaml
menu:
  title: "TEXT" # Заголовок меню
  size: 27 # Размер меню
```

## Шансы
Настройка фальшивых шансов случайных групп (только для отображения)
```yaml
chances:
  Vip: 5
  VipPlus: 10
  Premium: 15
  Deluxe: 20
  Legend: 25
  Ultra: 30
```

## Призы
Настройка призов, которые будут использоваться в анимации.
- `win` - приз, который игрок получит в качестве выигрыша
- `random` - случайный приз, исключительно для отображения

Фактически это просто создание [заполнителей](#призы-1) для отображения.
```yaml
prizes:
  win: win
  random1: random
  random2: random
  random3: random
  random4: random
  random5: random
  random6: random
  random7: random
  random8: random
```

## Группы действий
Группы действий нужны, чтобы не повторятся при написании сложных сценариев анимации, которые требуют цикличности.

```yaml
groups:
  setup: # название группы
    actions: # действия этой группы
      - type: replace_item
        slot: 26
        material: RED_STAINED_GLASS_PANE
        display_name: "&7Skip the animation"
  second_group: # другая группа
    # actions:
    #   - type: replace_item
    #     slots: 0-8
    #     material: BARRIER
    #     display_name: "&cSTOP"
```

:::info
Использование групп происходит с помощью действия [`execute_group`](#execute_group)
:::

## Заполнители
### Обычные
- `%case_type%` - Тип кейса
- `%case_display_name%` - Отображаемое название кейса
- `%case_title%` - Заголовок кейса
- `%player%` - Имя игрока, открывающего кейс
- `%current_tick%` - Текущий тик
### Призы
`<name>` - имя приза из секции [prizes](#призы)
- `%prize_<name>_group%` - Название группы приза
- `%prize_<name>_chance%` - Шанс группы приза
- `%prize_<name>_display_name%` - Отображаемое название приза
- `%prize_<name>_id%` - ID материала приза (STONE, BASE64 и т. д.)

## Настройка тиков

### Один тик
```yaml
ticks:
  0: # действия будут выполнены только в начале (на 0 тике)
    actions:
      # определенные действия
```

### Диапазон тиков
```yaml
ticks:
  0-20: # действия будут повторяться 20 тиков
    actions:
    # определенные действия
```

Для диапазона доступны еще 2 настройки, такие как `interval` (интервал) и `gradual_slowdown` (постепенное замедление)
#### Интервал
Интервал между тиками означает, сколько тиков будет пропускаться после каждого выполнения
```yaml
ticks:
  0-20: # действия будут повторяться 10 тиков
    interval: 2 # интервал между тиками
    actions:
    # определенные действия
```

#### Постепенное замедление
Постепенное замедление работает на основе интервала, который с каждым выполнением тика увеличивается.
Эта функция работает по формуле: `интервал = scale_factor * шаг^2`, где шаг - это номер тика в данном диапазоне.
```yaml
ticks:
  0-20:
    gradual_slowdown:
      enabled: true
      scale_factor: 1.0
    actions:
    # определенные действия
```

:::tip
Для удобства вычисления нужных значений, можно воспользоваться [командами](#команды-для-вычисления-постепенного-замедления)
:::

## Настройки действий

:::warning
Почти все действия имеют свои поля настроек, важно соблюдать названия и синтаксис.
:::

### `end`
Действие, которое завершает анимацию и выдает приз игроку.

### `replace_item`
Действие, которое заменяет предмет в слоте.

<Tabs>
<TabItem value="description" label="Описание" default>

| Поле           | Описание                                                                   | Синонимы                               | Обязательно                   |
|----------------|------------------------------------------------------------------------|----------------------------------------|--------------------------------|
| `slot`         | Слот или диапазон слотов                                              | нет                                  | Да, если `slots` не указано |
| `slots`        | Список слотов или диапазонов                                          | нет                                  | Да, если `slot` не указано  |
| `material`     | Материал предмета для замены. Поддерживаются все материалы из DonateCase | `id`                                   | Нет                             |
| `display_name` | Отображаемое имя предмета                                           | `name`, `displayName`                  | Нет                             |
| `lore`         | Описание предмета                                                          | нет                                  | Нет                             | 
| `enchanted`    | Указывает, зачарован ли предмет                                        | нет                                  | Нет                             |
| `model_data`   | Устанавливает пользовательские данные модели                                       | `custom_model_data`, `customModelData` | Нет                             |
| `rgb`          | Устанавливает цвет кожаных предметов                                         | нет                                  | Нет                             |

</TabItem>

<TabItem value="example" label="Пример">

```yaml
  - type: replace_item
    slot: 9
    material: "%prize_win_id%"
    display_name: "&b%prize_win_display_name%"
    lore:
      - "&6&lChance: &c&l%prize_win_chance%"
```
</TabItem>

</Tabs>

### `move_item`
Действие, которое перемещает предмет в другой слот.
:::warning
При перемещении в указанный слот предмет, который находился там, будет заменен и потерян.
:::

<Tabs>
<TabItem value="description" label="Описание" default>

| Поле           | Описание                                     | Синонимы  |  Обязательно |
|----------------|------------------------------------------|-----------|---------------|
| `from`         | Слот предмета, который нужно переместить | `first`   | Да           |
| `to`           | Слот, в который нужно переместить        | `second`  | Да           |

</TabItem>

<TabItem value="example" label="Пример">

```yaml
  - type: move_item
    from: 0
    to: 1
```
</TabItem>

</Tabs>

### `switch_item`
Действие, которое меняет предметы местами.

<Tabs>
<TabItem value="description" label="Описание" default>


| Поле        | Описание                                     | Синонимы   | Обязательно  |
|-------------|------------------------------------------|------------|---------------|
| `base_slot` | Начальный слот, с которого начнется обмен | нет      | Да, если `slots` не указано           |
| `count`     | Количество обменов                           | нет      | Да, если `slots` не указано          |
| `slots`     | Список слотов для обмена | нет | Да, если `base_slot` и `count` не указаны |

</TabItem>

<TabItem value="example" label="Пример">

```yaml
  - type: switch_item
    base_slot: 9
    count: 9
```

Тоже самое, что и предыдущее
```yaml
  - type: switch_item
    slots: [9-17]
```

Пример продвинутого обмена (колесо)
```yaml
  - type: switch_item
    slots: [10-16, 25, 34, 43, 42-37, 28, 19]
```
</TabItem>

</Tabs>

### `donate_case`
Действие, которое выполняет действие из DonateCase.

<Tabs>
<TabItem value="description" label="Описание" default>

| Поле      | Описание                     | Синонимы | Обязательно |
|-----------|--------------------------|----------|--------------|
| `actions` | Список действий для выполнения | нет   | Да          |

</TabItem>

<TabItem value="example" label="Пример">

```yaml
  - type: donate_case
    actions:
      - "[sound] UI_BUTTON_CLICK 1 1"
```
</TabItem>

</Tabs>

### `set_title`
Действие, которое изменяет заголовок меню для всех зрителей.

:::warning
Действие работает только на версии сервера 1.20+.
:::

<Tabs>
<TabItem value="description" label="Описание" default>

| Поле    | Описание                 | Синонимы | Обязательно |
|---------|----------------------|----------|--------------|
| `title` | Новый заголовок меню	 | нет    | Да         |

</TabItem>

<TabItem value="example" label="Пример">

```yaml
  - type: set_title
    title: "New title"
```
</TabItem>

</Tabs>

### `set_click`
Действие, которое назначает действия после нажатия на слот.

<Tabs>
<TabItem value="description" label="Описание" default>

| Поле           | Описание                                                                 | Синонимы | Обязательно                                     |
|-----------------|----------------------------------------------------------------------|----------|-------------------------------------------------|
| `slot`         | Слот или диапазон слотов	                                            | нет    | Да, если `slots` не указано                 |
| `slots`        | Список слотов или диапазонов	                                        | нет    | Да, если `slot` не указано                  |
| `click_types`  | Список типов кликов, на которые будет реагировать слот. Если не указано, то будет реагировать на все | нет   | Нет                                              |
| `actions`      | Список действий, которые выполняются после клика                         | нет    | Нет                                              |

</TabItem>

<TabItem value="example" label="Пример">

```yaml
  - type: set_click
    slot: 0
    slots: [1, 2]
    click_types:
      - LEFT
      - RIGHT
    actions:
      - type: end
```
</TabItem>

</Tabs>

### `execute_group`
Действие, которое исполняет группу назначеных действий.
Подробнее - [Группы действий](#группы-действий)

<Tabs>
<TabItem value="description" label="Описание" default>

| Поле    | Описание                 | Синонимы | Обязательно |
|---------|----------------------|----------|--------------|
| `group` | Название группы	 | нет    | Да         |

</TabItem>

<TabItem value="example" label="Пример">

```yaml
  - type: execute_group
    group: setup
```
</TabItem>

</Tabs>

## Дополнительные функции
### Расширенный просмотр
Функция расширенного просмотра позволяет игрокам-зрителям смотреть на активную анимацию, нажав ПКМ по активному блоку кейса. Для этого в настройках анимации нужно добавить строку `Locked: true`

```yaml
  AnimationSettings:
    Menu: csgo # название конфигурации меню
    Locked: true
```

Функция `Locked` означает, что кейс заблокирован для одновременного открытия множества анимаций с одного блока. Если функция отключена (`false`), кейс будет доступен для одновременного открытия.

### Открытие с помощью команды
BetterCasino позволяет открывать кейсы с реальным отображением анимации с помощью стандартной команды `/dc opencase`. Это означает, что игроки могут открывать кейсы независимо от блока кейса.

### Команды для вычисления постепенного замедления
- `/dc bettercasino steps (начало) (конец) (scale factor)` - Вычислить количество шагов (исполняемых тиков)
- `/dc bettercasino scalefactor (начало) (конец) (шаги)` - Вычислить scale factor
- `/dc bettercasino end (начало) (шаги) (scale factor)` - Вычислить конечный тик

### JSON Schema
JSON Schema добавляет подсказки для редактирования любых конфигураций YAML. Например, загрузив плагин `YAML` для VSCode, будут отображаться вспомогательные подсказки. DCBetterCasino имеет свою собственную схему для редактирования меню, но чтобы VSCode распознал, что это конфигурация именно для меню, достаточно в конце файла добавить строку `_dcbc`, например: `csgo_dcbc.yml`.

![alt text](../../../assets/jsonschema.png)